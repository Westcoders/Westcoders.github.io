var E=(_,r,i)=>new Promise((u,b)=>{var o=l=>{try{m(i.next(l))}catch(f){b(f)}},w=l=>{try{m(i.throw(l))}catch(f){b(f)}},m=l=>l.done?u(l.value):Promise.resolve(l.value).then(o,w);m((i=i.apply(_,r)).next())});import{B as M,b0 as T,ap as D,r as k,Q as N,j as G,u as e,D as A,F as K,G as L,H as $,w as s,a7 as a,b1 as O,af as d,K as c,aT as p,b2 as P,J as U,b3 as V,b4 as j,b5 as q,b6 as Q,b7 as W,L as H,b8 as J,ac as X,b9 as Y,ba as Z}from"./vendor.e45423c9.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import{u as ee,a as se,L as y,_ as ae,b as te}from"./LoginFormTitle.9d99dc72.js";import{b as oe,a as le,f as ne,h as re}from"./index.78902926.js";const ye=M({setup(_){const r=Y,i=Z,u=T.Item,b=D.Password,{t:o}=oe(),{notification:w,createErrorModal:m}=re(),{prefixCls:l}=le("login"),f=ne(),{setLoginState:x,getLoginState:B}=ee(),{getFormRules:h}=se(),C=k(),S=k(!1),F=k(!1),g=N({account:"vben",password:"123456"}),{validForm:z}=te(C),I=G(()=>e(B)===y.LOGIN);function R(){return E(this,null,function*(){const v=yield z();if(!!v)try{S.value=!0;const t=yield f.login({password:v.password,username:v.account,mode:"none"});t&&w.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${t.realName}`,duration:3})}catch(t){m({title:o("sys.api.errorTip"),content:t.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body})}finally{S.value=!1}})}return(v,t)=>(A(),K(X,null,[L(s(ae,{class:"enter-x"},null,512),[[$,e(I)]]),L(s(e(T),{class:"p-4 enter-x",model:e(g),rules:e(h),ref_key:"formRef",ref:C,onKeypress:J(R,["enter"])},{default:a(()=>[s(e(u),{name:"account",class:"enter-x"},{default:a(()=>[s(e(D),{size:"large",value:e(g).account,"onUpdate:value":t[0]||(t[0]=n=>e(g).account=n),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:a(()=>[s(e(b),{size:"large",visibilityToggle:"",value:e(g).password,"onUpdate:value":t[1]||(t[1]=n=>e(g).password=n),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(r),{span:12},{default:a(()=>[s(e(u),null,{default:a(()=>[s(e(O),{checked:F.value,"onUpdate:checked":t[2]||(t[2]=n=>F.value=n),size:"small"},{default:a(()=>[d(c(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:a(()=>[s(e(u),{style:{"text-align":"right"}},{default:a(()=>[s(e(p),{type:"link",size:"small",onClick:t[3]||(t[3]=n=>e(x)(e(y).RESET_PASSWORD))},{default:a(()=>[d(c(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:a(()=>[s(e(p),{type:"primary",size:"large",block:"",onClick:R,loading:S.value},{default:a(()=>[d(c(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(r),{md:8,xs:24},{default:a(()=>[s(e(p),{block:"",onClick:t[4]||(t[4]=n=>e(x)(e(y).MOBILE))},{default:a(()=>[d(c(e(o)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:a(()=>[s(e(p),{block:"",onClick:t[5]||(t[5]=n=>e(x)(e(y).QR_CODE))},{default:a(()=>[d(c(e(o)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:7,xs:24},{default:a(()=>[s(e(p),{block:"",onClick:t[6]||(t[6]=n=>e(x)(e(y).REGISTER))},{default:a(()=>[d(c(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1}),s(e(P),{class:"enter-x"},{default:a(()=>[d(c(e(o)("sys.login.otherSignIn")),1)]),_:1}),U("div",{class:H(["flex justify-evenly enter-x",`${e(l)}-sign-in-way`])},[s(e(V)),s(e(j)),s(e(q)),s(e(Q)),s(e(W))],2)]),_:1},8,["model","rules","onKeypress"]),[[$,e(I)]])],64))}});export{ye as default};
