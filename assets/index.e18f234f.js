var Ie=Object.defineProperty,Oe=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var se=(e,l,a)=>l in e?Ie(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,I=(e,l)=>{for(var a in l||(l={}))Pe.call(l,a)&&se(e,a,l[a]);if(ce)for(var a of ce(l))Ue.call(l,a)&&se(e,a,l[a]);return e},re=(e,l)=>Oe(e,$e(l));var ie=(e,l,a)=>new Promise((k,T)=>{var L=x=>{try{p(a.next(x))}catch(v){T(v)}},c=x=>{try{p(a.throw(x))}catch(v){T(v)}},p=x=>x.done?k(x.value):Promise.resolve(x.value).then(L,c);p((a=a.apply(e,l)).next())});import{c9 as je,ca as Ve,cb as me,B as xe,r as Le,ad as He,j as M,T as $,D as F,F as U,u as s,a8 as Xe,ae as O,a2 as J,a7 as j,af as de,K as oe,L as ue,w as A,cc as Ye,ac as Q,aq as Re,cd as ze,aD as qe,aU as Je,ce as Ge,aB as Qe,az as We,aC as Ze,V as et,cf as tt,A as nt,n as W,Q as he,t as Y,cg as at,o as lt,an as V,$ as ct,bg as st,G as fe,H as ye,bJ as rt,a5 as it,at as pe,bz as dt}from"./vendor.e45423c9.js";import{aW as ot,b as ut,aA as ht,I as Z,aX as ke,ak as ft,i as G,aY as yt,aD as pt,aZ as kt,az as gt,U as Kt,a_ as St,B as ge,af as xt}from"./index.78902926.js";/* empty css                */import{u as Lt}from"./useContextMenu.2c1e3b2d.js";function ee(e,l){return l?typeof l=="string"?` ${e}--${l}`:Array.isArray(l)?l.reduce((a,k)=>a+ee(e,k),""):Object.keys(l).reduce((a,k)=>a+(l[k]?ee(e,k):""),""):""}function At(e){return(l,a)=>(l&&typeof l!="string"&&(a=l,l=""),l=l?`${e}__${l}`:e,`${l}${ee(l,a)}`)}function Ae(e){return[At(`${ot}-${e}`)]}const Ke=Symbol(),Se=Symbol();function Ct(e,l){if(!Ve(e)||!!e[Se])return e;const{values:a,required:k,default:T,type:L,validator:c}=e,p=a||c?x=>{let v=!1,d=[];if(a&&(d=[...a,T],v||(v=d.includes(x))),c&&(v||(v=c(x))),!v&&d.length>0){const h=[...new Set(d)].map(t=>JSON.stringify(t)).join(", ");me(`Invalid prop: validation failed${l?` for prop "${l}"`:""}. Expected one of [${h}], got value ${JSON.stringify(x)}.`)}return v}:void 0;return{type:typeof L=="object"&&Object.getOwnPropertySymbols(L).includes(Ke)?L[Ke]:L,required:!!k,default:T,validator:p,[Se]:!0}}const vt=e=>je(Object.entries(e).map(([l,a])=>[l,Ct(a,l)]));var E=(e=>(e[e.SELECT_ALL=0]="SELECT_ALL",e[e.UN_SELECT_ALL=1]="UN_SELECT_ALL",e[e.EXPAND_ALL=2]="EXPAND_ALL",e[e.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",e[e.CHECK_STRICTLY=4]="CHECK_STRICTLY",e[e.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY",e))(E||{});const bt=["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],Et=vt({value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:Boolean,search:Boolean,searchValue:{type:String,default:""},checkStrictly:Boolean,clickRowToExpand:{type:Boolean,default:!1},checkable:Boolean,defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:Boolean,fieldNames:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:void 0},rightMenuList:{type:Array},filterFn:{type:Function,default:void 0},highlight:{type:[Boolean,String],default:!1},expandOnSearch:Boolean,checkOnSearch:Boolean,selectedOnSearch:Boolean}),Tt={key:2,class:"flex items-center flex-1 cursor-pointer justify-self-stretch"},_t=xe({props:{helpMessage:{type:[String,Array],default:""},title:{type:String,default:""},toolbar:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},searchText:{type:String,default:""},checkAll:{type:Function,default:void 0},expandAll:{type:Function,default:void 0}},emits:["strictly-change","search"],setup(e,{emit:l}){const a=e,k=Le(""),[T]=Ae("tree-header"),L=He(),{t:c}=ut(),p=M(()=>{const t=L.headerTitle||a.title;return["mr-1","w-full",{["ml-5"]:t}]}),x=M(()=>{const{checkable:t}=a,r=[{label:c("component.tree.expandAll"),value:E.EXPAND_ALL},{label:c("component.tree.unExpandAll"),value:E.UN_EXPAND_ALL,divider:t}];return t?[{label:c("component.tree.selectAll"),value:E.SELECT_ALL},{label:c("component.tree.unSelectAll"),value:E.UN_SELECT_ALL,divider:t},...r,{label:c("component.tree.checkStrictly"),value:E.CHECK_STRICTLY},{label:c("component.tree.checkUnStrictly"),value:E.CHECK_UN_STRICTLY}]:r});function v(t){var i,u,o,y;const{key:r}=t;switch(r){case E.SELECT_ALL:(i=a.checkAll)==null||i.call(a,!0);break;case E.UN_SELECT_ALL:(u=a.checkAll)==null||u.call(a,!1);break;case E.EXPAND_ALL:(o=a.expandAll)==null||o.call(a,!0);break;case E.UN_EXPAND_ALL:(y=a.expandAll)==null||y.call(a,!1);break;case E.CHECK_STRICTLY:l("strictly-change",!1);break;case E.CHECK_UN_STRICTLY:l("strictly-change",!0);break}}function d(t){l("search",t)}const h=et(d,200);return $(()=>k.value,t=>{h(t)}),$(()=>a.searchText,t=>{t!==k.value&&(k.value=t)}),(t,r)=>(F(),U("div",{class:ue([s(T)(),"flex px-2 py-1.5 items-center"])},[s(L).headerTitle?Xe(t.$slots,"headerTitle",{key:0}):O("",!0),!s(L).headerTitle&&t.title?(F(),J(s(ht),{key:1,helpMessage:t.helpMessage},{default:j(()=>[de(oe(t.title),1)]),_:1},8,["helpMessage"])):O("",!0),t.search||t.toolbar?(F(),U("div",Tt,[t.search?(F(),U("div",{key:0,class:ue(s(p))},[A(s(Ye),{placeholder:s(c)("common.searchText"),size:"small",allowClear:"",value:k.value,"onUpdate:value":r[0]||(r[0]=i=>k.value=i)},null,8,["placeholder","value"])],2)):O("",!0),t.toolbar?(F(),J(s(Ze),{key:1,onClick:r[1]||(r[1]=We(()=>{},["prevent"]))},{overlay:j(()=>[A(s(Qe),{onClick:v},{default:j(()=>[(F(!0),U(Q,null,Re(s(x),i=>(F(),U(Q,{key:i.value},[A(s(ze),qe(Je({key:i.value})),{default:j(()=>[de(oe(i.label),1)]),_:2},1040),i.divider?(F(),J(s(Ge),{key:0})):O("",!0)],64))),128))]),_:1})]),default:j(()=>[A(s(Z),{icon:"ion:ellipsis-vertical"})]),_:1})):O("",!0)])):O("",!0)],2))}}),Bt=({icon:e})=>e?tt(e)?nt(Z,{icon:e,class:"mr-1"}):Z:null;function Nt(e,l){function a(d){const h=[],t=d||s(e),{key:r,children:i}=s(l);if(!i||!r)return h;for(let u=0;u<t.length;u++){const o=t[u];h.push(o[r]);const y=o[i];y&&y.length&&h.push(...a(y))}return h}function k(d){const h=[],t=d||s(e),{key:r,children:i}=s(l);if(!i||!r)return h;for(let u=0;u<t.length;u++){const o=t[u];o.disabled!==!0&&o.selectable!==!1&&h.push(o[r]);const y=o[i];y&&y.length&&h.push(...k(y))}return h}function T(d,h){const t=[],r=h||s(e),{key:i,children:u}=s(l);if(!u||!i)return t;for(let o=0;o<r.length;o++){const y=r[o],b=y[u];d===y[i]?(t.push(y[i]),b&&b.length&&t.push(...a(b))):b&&b.length&&t.push(...T(d,b))}return t}function L(d,h,t){if(!d)return;const r=t||s(e),{key:i,children:u}=s(l);if(!(!u||!i))for(let o=0;o<r.length;o++){const y=r[o],b=y[u];if(y[i]===d){r[o]=I(I({},r[o]),h);break}else b&&b.length&&L(d,h,y[u])}}function c(d=1,h,t=1){if(!d)return[];const r=[],i=h||s(e)||[];for(let u=0;u<i.length;u++){const o=i[u],{key:y,children:b}=s(l),R=y?o[y]:"",P=b?o[b]:[];r.push(R),P&&P.length&&t<d&&(t+=1,r.push(...c(d,P,t)))}return r}function p({parentKey:d=null,node:h,push:t="push"}){const r=W(s(e));if(!d){r[t](h),e.value=r;return}const{key:i,children:u}=s(l);!u||!i||(ke(r,o=>{if(o[i]===d)return o[u]=o[u]||[],o[u][t](h),!0}),e.value=r)}function x({parentKey:d=null,list:h,push:t="push"}){const r=W(s(e));if(!(!h||h.length<1))if(d){const{key:i,children:u}=s(l);if(!u||!i)return;ke(r,o=>{if(o[i]===d){o[u]=o[u]||[];for(let y=0;y<h.length;y++)o[u][t](h[y]);return e.value=r,!0}})}else for(let i=0;i<h.length;i++)r[t](h[i])}function v(d,h){if(!d)return;const t=h||s(e),{key:r,children:i}=s(l);if(!(!i||!r))for(let u=0;u<t.length;u++){const o=t[u],y=o[i];if(o[r]===d){t.splice(u,1);break}else y&&y.length&&v(d,o[i])}}return{deleteNodeByKey:v,insertNodeByKey:p,insertNodesByKey:x,filterByLevel:c,updateNodeByKey:L,getAllKeys:a,getChildrenKeys:T,getEnabledKeys:k}}function wt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!st(e)}var $t=xe({name:"BasicTree",inheritAttrs:!1,props:Et,emits:bt,setup(e,{attrs:l,slots:a,emit:k,expose:T}){const[L]=Ae("tree"),c=he({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),p=he({startSearch:!1,searchText:"",searchData:[]}),x=Le([]),[v]=Lt(),d=M(()=>{const{fieldNames:n}=e;return I({children:"children",title:"title",key:"key"},n)}),h=M(()=>{let n=re(I(I({blockNode:!0},l),e),{expandedKeys:c.expandedKeys,selectedKeys:c.selectedKeys,checkedKeys:c.checkedKeys,checkStrictly:c.checkStrictly,filedNames:s(d),"onUpdate:expandedKeys":f=>{c.expandedKeys=f,k("update:expandedKeys",f)},"onUpdate:selectedKeys":f=>{c.selectedKeys=f,k("update:selectedKeys",f)},onCheck:(f,K)=>{let g=Y(c.checkedKeys);if(ft(g)&&p.startSearch){const{key:C}=s(d);g=at(g,P(K.node.$attrs.node[C])),K.checked&&g.push(K.node.$attrs.node[C]),c.checkedKeys=g}else c.checkedKeys=f;const S=Y(c.checkedKeys);k("update:value",S),k("check",S,K)},onRightClick:be});return lt(n,"treeData","class")}),t=M(()=>p.startSearch?p.searchData:s(x)),r=M(()=>!t.value||t.value.length===0),{deleteNodeByKey:i,insertNodeByKey:u,insertNodesByKey:o,filterByLevel:y,updateNodeByKey:b,getAllKeys:R,getChildrenKeys:P,getEnabledKeys:Ce}=Nt(x,d);function ve(n,f){return!f&&e.renderIcon&&G(e.renderIcon)?e.renderIcon(n):f}function be(K){return ie(this,arguments,function*({event:n,node:f}){var N;const{rightMenuList:g=[],beforeRightClick:S}=e;let C={event:n,items:[]};if(S&&G(S)){let B=yield S(f,n);Array.isArray(B)?C.items=B:Object.assign(C,B)}else C.items=g;!((N=C.items)==null?void 0:N.length)||v(C)})}function m(n){c.expandedKeys=n}function Ee(){return c.expandedKeys}function te(n){c.selectedKeys=n}function Te(){return c.selectedKeys}function ne(n){c.checkedKeys=n}function _e(){return c.checkedKeys}function ae(n){c.checkedKeys=n?Ce():[]}function z(n){c.expandedKeys=n?R():[]}function Be(n){c.checkStrictly=n}$(()=>e.searchValue,n=>{n!==p.searchText&&(p.searchText=n)},{immediate:!0}),$(()=>e.treeData,n=>{n&&q(p.searchText)});function q(n){if(n!==p.searchText&&(p.searchText=n),k("update:searchValue",n),!n){p.startSearch=!1;return}const{filterFn:f,checkable:K,expandOnSearch:g,checkOnSearch:S,selectedOnSearch:C}=s(e);p.startSearch=!0;const{title:N,key:B}=s(d),w=[];if(p.searchData=yt(s(x),_=>{var H,X;const D=f?f(n,_,s(d)):(X=(H=_[N])==null?void 0:H.includes(n))!=null?X:!1;return D&&w.push(_[B]),D},s(d)),g){const _=pt(p.searchData).map(D=>D[B]);_&&_.length&&m(_)}S&&K&&w.length&&ne(w),C&&w.length&&te(w)}function Ne(n,f){if(!(!e.clickRowToExpand||!f||f.length===0))if(!c.expandedKeys.includes(n))m([...c.expandedKeys,n]);else{const K=[...c.expandedKeys],g=K.findIndex(S=>S===n);g!==-1&&K.splice(g,1),m(K)}}V(()=>{x.value=e.treeData}),ct(()=>{const n=parseInt(e.defaultExpandLevel);n>0?c.expandedKeys=y(n):e.defaultExpandAll&&z(!0)}),V(()=>{c.expandedKeys=e.expandedKeys}),V(()=>{c.selectedKeys=e.selectedKeys}),V(()=>{c.checkedKeys=e.checkedKeys}),$(()=>e.value,()=>{c.checkedKeys=Y(e.value||[])}),$(()=>c.checkedKeys,()=>{const n=Y(c.checkedKeys);k("update:value",n),k("change",n)}),V(()=>{c.checkStrictly=e.checkStrictly});const we={setExpandedKeys:m,getExpandedKeys:Ee,setSelectedKeys:te,getSelectedKeys:Te,setCheckedKeys:ne,getCheckedKeys:_e,insertNodeByKey:u,insertNodesByKey:o,deleteNodeByKey:i,updateNodeByKey:b,checkAll:ae,expandAll:z,filterByLevel:n=>{c.expandedKeys=y(n)},setSearchValue:n=>{q(n)},getSearchValue:()=>p.searchText};function De(n){const{actionList:f}=e;if(!(!f||f.length===0))return f.map((K,g)=>{var C;let S=!0;return G(K.show)?S=(C=K.show)==null?void 0:C.call(K,n):ge(K.show)&&(S=K.show),S?A("span",{key:g,class:L("action")},[K.render(n)]):null})}const Fe=M(()=>{const n=W(t.value);return kt(n,(f,K)=>{var le;const g=p.searchText,{highlight:S}=s(e),{title:C,key:N,children:B}=s(d),w=ve(f,f.icon),_=dt(f,C),D=g?_.indexOf(g):-1,H=p.startSearch&&!St(g)&&S&&D!==-1,X=`color: ${ge(S)?"#f50":S}`,Me=H?A("span",{class:((le=s(h))==null?void 0:le.blockNode)?`${L("content")}`:""},[A("span",null,[_.substr(0,D)]),A("span",{style:X},[g]),A("span",null,[_.substr(D+g.length)])]):_;return f.title=A("span",{class:`${L("title")} pl-2`,onClick:Ne.bind(null,f[N],f[B])},[(a==null?void 0:a.title)?xt(a,"title",f):A(Q,null,[w&&A(Bt,{icon:w},null),Me,A("span",{class:L("actions")},[De(f)])])]),f}),n});return T(we),()=>{let n;const{title:f,helpMessage:K,toolbar:g,search:S,checkable:C}=e,N=f||g||S||a.headerTitle,B={height:"calc(100% - 38px)"};return A("div",{class:[L(),"h-full",l.class]},[N&&A(_t,{checkable:C,checkAll:ae,expandAll:z,title:f,search:S,toolbar:g,helpMessage:K,onStrictlyChange:Be,onSearch:q,searchText:p.searchText},wt(n=gt(a))?n:{default:()=>[n]}),fe(A(Kt,{style:B},{default:()=>[A(rt,it(s(h),{showIcon:!1,treeData:Fe.value}),null)]}),[[ye,!s(r)]]),fe(A(pe,{image:pe.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[ye,s(r)]])])}}});export{$t as _};
